<html>
<head>
<script type="text/javascript" src="jquery.js"></script>

<link href="css/environment.css" media="screen" rel="stylesheet" type="text/css" /> 


</head>

<body>

<div id="topbar">
	<div id="controls">
		<a id="run">Pause</a>
	</div>
	<div id="select">
		<a id="species">
			Species View
		</a>
	</div>
</div>

<div id="environment">

	<canvas id="canvas" width="1000" height="1000" style="border:1px solid black;"></canvas>
	
</div>

<div id="info">
	<div class="info" id="habitat_info">

	</div>
</div>
<script src="http://localhost:3000/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:3000');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });

	socket.on('render', function(data) {
		render(data.data);
	});
	
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	function render(data) {
		
		var xx = data.length - 1;
		while (xx) {
			var hab = data[xx];
			ctx.fillStyle = hab.bcolor;  
			ctx.fillRect (hab.x * 10, hab.y * 10, 10, 10);
			if (hab.ocolor) {
				ctx.fillStyle = hab.ocolor;
				ctx.fillRect (hab.x * 10 + 1, hab.y * 10 + 1, 8, 8);
			}
			xx--;
		}
	}
	
	
	
</script>

</body>

</html>
